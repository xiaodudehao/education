<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>实训报告-个人报告</title>
    <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../package/bootstrapvalidator-master/dist/css/bootstrapValidator.min.css">
    <!-- 提示框样式 -->
    <link href="../lib/toastr/toastr.min.css" type="text/css" rel="stylesheet">
    <!--  对话框样式  -->
    <link href="../lib/confirm/jquery-confirm.min.css" type="text/css" rel="stylesheet">
    <!--  公共部分样式（除右侧主要内容）  -->
    <link rel="stylesheet" href="../css/stu_discussion/stu_discussion_public.css">
    <link rel="stylesheet" href="../css/stu_discussion/stu_report.css">
</head>
<body>
<div class="maincontent">
    <!-- 头部导航栏开始 -->
    <div class="header">
        <div class="banxin">
            <img src="../img/未标题-10.png" class="logo" alt="">
            <ul>
                <li><a href="../index.html">首页</a></li>
                <li><a href="../calssify.html">课程</a></li>
                <li><a href="../academy.html">院校</a></li>
                <li><a href="#">立体教材</a></li>
            </ul>
            <div class="search">
                <img class="searchicon" src="../img/未标题-1.png" ></img>
                <input type="text" placeholder="搜索课程或学校">
            </div>
            <div class="login">
                <a href="">
                    <img class="loginicon" src="../img/未标题-2.png"></img>
                </a>
                <!-- 这里的模态框用js实现 -->
                <div class="register" data-toggle="modal" data-target="#myModal">注册</div>
                <!-- 要显示新模态框，修改data-target中的ID就可以了 -->
                <div class="log" data-toggle="modal" data-target="#myModal1">登录</div>
            </div>
        </div>
    </div>
    <!-- 头部导航栏结束 -->
    <div class="mainpartportion">
        <div class="banxin clearfix">
            <div class="leftcatalogue">
                <div class="schoolnam clearfix">
                    <img src="../img/schoolimg.png" alt="" class="fl schoollogo">
                    <div class="fl schnam">上海职业技术学院</div>
                </div>
                <div class="course">
                    <img src="../images/kecheng1.png" alt="" class="courseimg">
                    <!-- <div class="coursenam">建筑材料性能检测</div> -->
                </div>
                <div class="cataloguenam">
                    <a class="left_menu_coursehomepage" href="" >课程首页</a>
                    <a class="left_menu_scoresranking" href="" >学习排行</a>
                    <a class="left_menu_announcement" href="">系统公告</a>
                    <a class="left_menu_standard" href="" >评分标准</a>
                    <a class="left_menu_onlinestudy" href="">在线学习</a>
                    <a class="left_menu_test" href="">作业与测试</a>
                    <a class="left_menu_report active" href="">实训报告</a>
                    <a class="left_menu_discussion" href="">讨论</a>
                </div>
            </div>
            <div class="rightresult">
                <div class="righttitle">
                    <a class="stu_report" href="">实训报告</a>-个人报告
                </div>
                <!--  没有数据时  -->
                <div class="no_data_tea">
                    没有数据！……
                </div>

                <div class="announcement_content">
                    <div class="announcement_information">
                        <div class="announcement_btn">
                            <button onclick="preview_report()">点击预览</button>
                        </div>
                        <div class="announcement_text">
                            <p>报告名称： 电脑硬件的组装</p>
                            <p>审批状态： 已批阅</p>
                            <p>报告得分： 89</p>
                            <p>报告评语： <span class="announcement_text_content">亲爱的同学们，大家好请撒地方放多少十多个沙发好久好久手动阀撒地方撒沙发上高速挡按时发圣诞分
                            亲爱的同学们亲爱的同学们，大家好请撒地方放多少十多个沙发好久好久手动阀撒地方撒沙发上高速挡按时发圣诞分
                            亲爱的同学们亲爱的同学们，大家好请撒地方放多少十多个沙发好久好久手动阀撒地方撒沙发上高速挡按时发圣诞分
                            亲爱的同学们亲爱的同学们</span></p>
                        </div>
                    </div>
                    <div class="announcement_information">
                        <div class="announcement_btn">
                            <button onclick="preview_report()">点击预览</button>
                        </div>
                        <div class="announcement_text">
                            <p>报告名称： 电脑硬件的组装</p>
                            <p>审批状态： 已批阅</p>
                            <p>报告得分： 89</p>
                            <p>报告评语： <span class="announcement_text_content">亲爱的同学们，大家好请撒地方放多少十多个沙发好久好久手动阀撒地方撒沙发上高速挡按时发圣诞分
                            亲爱的同学们亲爱的同学们，大家好请撒地方放多少十多个沙发好久好久手动阀撒地方撒沙发上高速挡按时发圣诞分
                            亲爱的同学们亲爱的同学们，大家好请撒地方放多少十多个沙发好久好久手动阀撒地方撒沙发上高速挡按时发圣诞分
                            亲爱的同学们亲爱的同学们</span></p>
                        </div>
                    </div>
                    <div class="announcement_information">
                        <div class="announcement_btn">
                            <button onclick="preview_report()">点击预览</button>
                        </div>
                        <div class="announcement_text">
                            <p>报告名称： 电脑硬件的组装</p>
                            <p>审批状态： 已批阅</p>
                            <p>报告得分： 89</p>
                            <p>报告评语： <span class="announcement_text_content">亲爱的同学们，大家好请撒地方放多少十多个沙发好久好久手动阀撒地方撒沙发上高速挡按时发圣诞分
                            亲爱的同学们亲爱的同学们，大家好请撒地方放多少十多个沙发好久好久手动阀撒地方撒沙发上高速挡按时发圣诞分
                            亲爱的同学们亲爱的同学们，大家好请撒地方放多少十多个沙发好久好久手动阀撒地方撒沙发上高速挡按时发圣诞分
                            亲爱的同学们亲爱的同学们</span></p>
                        </div>
                    </div>
                    <div class="announcement_information">
                        <div class="announcement_btn">
                            <button onclick="preview_report()">点击预览</button>
                        </div>
                        <div class="announcement_text">
                            <p>报告名称： 电脑硬件的组装</p>
                            <p>审批状态： 已批阅</p>
                            <p>报告得分： 89</p>
                            <p>报告评语： <span class="announcement_text_content">亲爱的同学们，大家好请撒地方放多少十多个沙发好久好久手动阀撒地方撒沙发上高速挡按时发圣诞分
                            亲爱的同学们亲爱的同学们，大家好请撒地方放多少十多个沙发好久好久手动阀撒地方撒沙发上高速挡按时发圣诞分
                            亲爱的同学们亲爱的同学们，大家好请撒地方放多少十多个沙发好久好久手动阀撒地方撒沙发上高速挡按时发圣诞分
                            亲爱的同学们亲爱的同学们</span></p>
                        </div>
                    </div>
                </div>
                <!--  分页  -->
                <div class="page_area">
                    <ul id="page"></ul>
                </div>

            </div>
        </div>
    </div>
</div>

<!-- 底部开始 -->
<div class="footercontenter">
    <div class="footer">
        <div class="banxin footerbanxin">
            <div class="footercenter">
                沪公网备案  *****号&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;COPYRIGHT © 2008-2012 兰鸿科技
            </div>
        </div>
    </div>
</div>
<!-- 底部结束 -->
<!-- 注册模态框开始 -->
<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="registertitle">
                用户注册
            </div>
            <form id="registerform" name="register"  class="registerform" action="">
                <div class="form-group">

                    <input  name="telephoneemail" placeholder="输入邮箱或手机号" class="telephone" type="text">
                </div>
                <div class="form-group">

                    <input name="username" placeholder="输入用户名" class="username" type="text">
                </div>
                <div class="form-group">

                    <input id="password" name="password" placeholder="输入密码" class="password" type="password">
                </div>
                <!-- <div class="nameexist">该用户名已存在</div> -->
                <div class="registerbutton">立即注册</div>
                <div class="elseregister">
                    <span>其它登录方式</span>
                    <a href=""><img src="../img/qq.png" alt=""></a>
                    <a href=""><img src="../img/weixin.png" alt=""></a>
                    <a href=""><img  src="../img/xinlang.png" alt=""></a>
                    <div class="nameexist">该用户名已存在</div>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- 注册模态框结束 -->
<!-- 登录模态框开始 -->
<div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="registertitle">
                用户登录
            </div>
            <form class="registerform loginform" id="loginform" action="">
                <div class="form-group">
                    <input  placeholder="输入用户名" name="username" class="telephone" type="text">
                </div>
                <div class="form-group">
                    <input placeholder="输入密码" name="password" class="username" type="password">
                </div>

                <div class="codefather clearfix">
                    <input  placeholder="输入验证码" name="code" class="code" type="text">
                    <img src="../img/code.png" class="codeimg"></img>
                    <div class="check">换一张</div>
                    <div class="codeerr uperr">
                        ⓧ 用户名或密码错误
                    </div>
                    <div class="codeerr cerr">
                        ⓧ 验证码错误
                    </div>
                </div>

                <div class="loginbutton">立即登录</div>
                <div class="else">

                    <div class="linkregister">注册</div>
                    <div class="forget">忘记密码</div>
                    <span>其它登录方式</span>


                    <a href=""><img src="../img/qq.png" alt=""></a>
                    <a href=""> <img src="../img/weixin.png" alt=""></a>
                    <a href=""><img  src="../img/xinlang.png" alt=""></a>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- 登录模态框结束 -->
<!-- loading Modal start-->
<div class="modal fade" id="loadingModal" data-backdrop="static">
    <div style="width: 200px;height:20px; z-index: 20000; position: absolute; text-align: center; left: 50%; top: 50%;margin-left:-100px;margin-top:-10px">
        <div class="progress progress-striped active" style="margin-bottom: 0;">
            <div class="progress-bar" style="width: 100%;"></div>
        </div>
        <h5 style="color: white; font-weight: bold">努力加载中...</h5>
    </div>
</div>
</body>
<script src="../node_modules/echarts/dist/echarts.common.js" ></script>
<script src="../node_modules/jquery/dist/jquery.min.js" ></script>
<script src="../node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="../package/bootstrapvalidator-master/dist/js/bootstrapValidator.min.js" ></script>
<!-- 分页器 -->
<script src="../lib/bootstrap-paginator.js"></script>
<!-- 提示框插件 -->
<script src="../lib/toastr/toastr.min.js"></script>
<!-- 对话框样式 -->
<script src="../lib/confirm/jquery-confirm.min.js"></script>
<script src="../js/public.js" ></script>
<script type="text/javascript">
    var pageNum = 1
    $(function(){
        // 模态框居中
        modalCenter('#myModal')
        modalCenter('#myModal1')
        my_report(pageNum)
        ellipsis(200)
        // 跳页-报告首页
        $(".stu_report").attr("href", './stu_report.html?c_id='+ cid +'')
    })

    function preview_report() {
        $(location).attr("href", './stu_report_preview.html?c_id='+ cid)
    }

    // 查询我的报告
    function my_report(pageNum) {
        $("#loadingModal").modal("show")
        var MyReportAjax = $.ajax({
            url: HTTP_URLH + "Report/me_report",
            type: "post",
            data: {
                id: 1,
                cid: 1,
                page: pageNum
            },
            dataType: "json",
            success: function (data) {
                console.log(data)
                var repotr = data.shuju
                var res = ""
                if (repotr == "") {
                    $("#loadingModal").modal("hide")
                    $(".no_data_tea").show()
                    $('.announcement_content').html(res)
                } else {
                    for (var i in repotr) {
                        var item = repotr[i]
                        var state = ""
                        if (item.state == "0") {
                            state = "未批阅"
                            res += '<div class="announcement_information">\n' +
                                '                        <div class="announcement_btn">\n' +
                                '                            <button onclick="preview_report()">点击预览</button>\n' +
                                '                        </div>\n' +
                                '                        <div class="announcement_text">\n' +
                                '                            <p>报告名称： '+ item.name +'</p>\n' +
                                '                            <p>审批状态： '+ state +'</p>\n' +
                                '                            <p>报告得分： '+ state +'</p>\n' +
                                '                            <p>报告评语： <span class="announcement_text_content">'+ state +'</span></p>\n' +
                                '                        </div>\n' +
                                '                    </div>'
                        } else {
                            state = "已批阅"
                            res += '<div class="announcement_information">\n' +
                                '                        <div class="announcement_btn">\n' +
                                '                            <button onclick="preview_report()">点击预览</button>\n' +
                                '                        </div>\n' +
                                '                        <div class="announcement_text">\n' +
                                '                            <p>报告名称： '+ item.name +'</p>\n' +
                                '                            <p>审批状态： '+ state +'</p>\n' +
                                '                            <p>报告得分： '+ item.score +'</p>\n' +
                                '                            <p>报告评语： <span class="announcement_text_content">'+ item.text +'</span></p>\n' +
                                '                        </div>\n' +
                                '                    </div>'
                        }

                    }
                    $(".announcement_content").html(res)
                    // 调用字数超出显示省略号……
                    ellipsis(200)
                    //分页
                    $("#page").bootstrapPaginator({
                        bootstrapMajorVersion: 3,   //bootstrap版本
                        currentPage: pageNum,  //当前页数
                        totalPages: data.pag,   //总页数
                        numberOfPages: 3,    //分页器每页展示页码数
                        shouldShowPage: true,   //所有的按钮都展示
                        itemTexts: function (type, page, current) {
                            // console.log(type)
                            //设置分页控件每部分的显示文字
                            switch (type) {
                                case "first":
                                    return "第一页"
                                case "prev":
                                    return "上一页"
                                case "next":
                                    return "下一页"
                                case "last":
                                    return "最后一页"
                                case "page":
                                    return page
                                case "jump":
                                    return "跳转"
                            }
                        }, onPageClicked: function(event, originalEvent, type, page) {
                            //点击事件
                            //page表示分页控件当前的页码，用这个页码重新走网络请求，会拿到对应的数据
                            pageNum = page
                            // 查询
                            my_report(pageNum)
                        }
                    })
                    //  分页结束
                }
            },
            error: function (e) {
                toastr.error("网络开小猜了，请稍后再试！")
                console.log(e)
            },
            complete: function (xhr, status) {
                // 隐藏loading
                $("#loadingModal").modal("hide")
            }
        })
    }
    //提示框初始化，toast-top-center表示提示框的位置
    toastr.options = {
        positionClass: 'toast-top-center', // 提示框位置
        closeButton: true  // 是否显示关闭按钮
    }

    //  设置字数超出显示省略号……
    function ellipsis(num) {
        $(".announcement_text_content").each(function () {
            var maxwidth = num;
            // console.log($(this).text());
            // console.log($(this).text().length);
            if ($(this).text().length > maxwidth) {
                $(this).text($(this).text().substring(0, maxwidth));
                $(this).html($(this).html() + '…');
            }
        });
    }

</script>
</html>