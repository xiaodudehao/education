<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>在线学习</title>
    <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../package/bootstrapvalidator-master/dist/css/bootstrapValidator.min.css">
    <link rel="stylesheet" href="../css/teachpublic.css">
    <!-- <link rel="stylesheet" href="../css/coursehomepage.css">
    <link rel="stylesheet" href="../css/announcement.css"> -->
    <link rel="stylesheet" href="../css/page.css">
    <link rel="stylesheet" href="../css/onlinestudy.css">
</head>
<body>
    <div class="maincontent">
    <!-- 头部导航栏开始 -->
    <div class="header">
        <div class="banxin">
            <img src="../img/未标题-10.png" class="logo" alt="">
            <ul>
                <li><a href="">首页</a></li>
                <li><a href="">课程</a></li>
                <li><a href="">院校</a></li>
                <li><a href="">立体教材</a></li>
            </ul>
            <div class="search">
                <img class="searchicon" src="../img/未标题-1.png" >
                <input type="text" placeholder="搜索课程或学校">
            </div>
            <div class="login">
                <a href="">
                    <img class="loginicon" src="../img/未标题-2.png">
                </a>
                <!-- 这里的模态框用js实现 -->
                <div class="register" data-toggle="modal" data-target="#myModal">注册</div>
                <!-- 要显示新模态框，修改data-target中的ID就可以了 -->
                <div class="log" data-toggle="modal" data-target="#myModal1">登录</div>
            </div>
        </div>
    </div>
    <!-- 头部导航栏结束 -->
        <div class="mainpartportion">
            <div class="banxin clearfix">
                <div class="leftcatalogue">
                    <div class="schoolnam clearfix">
                            <img src="../img/schoolimg.png" alt="" class="fl schoollogo">
                            <div class="fl schnam">上海职业技术学院</div>
                    </div>
                    <div class="course">
                        <img src="../images/kecheng1.png" alt="" class="courseimg">
                        <div class="coursenam">建筑材料性能检测</div>
                    </div>
                    <div class="cataloguenam">
                        <a href="" >课程首页</a>
                        <a href="scoresranking.html" >学习排行</a>
                        <a href="" >系统公告</a>
                        <a href="" >评分标准</a>
                        <a href="" class="active">在线学习</a>
                        <a href="">作业与测试</a>
                        <a href="">考试</a>
                        <a href="">讨论</a>
                    </div>
                    <div class="share">
                        <div></div>
                        <a href=""></a>
                    </div>
                </div>
                <div class="rightresult">
                    <div class="righttitle">
                        在线学习
                    </div>
                    <div class="rightcontent">

                            <div class="project">
                                    <div class="projecttitle">
                                       <span>项目一</span>  水泥性能检测
                                    </div>
                                    <div class="task">
                                        <div class="clearfix taskbox">
                                            <div class="triangle"></div>
                                            <div class="tasktitle">
                                                <span>任务一</span>  水泥细度检测
                                            </div>
                                        </div>
                                        <div class="detail">
                                            <a class="detailtitle">
                                                <span> 看一看</span> 介绍水泥细度步骤豆腐干的高度符合是非得失根深蒂固更大
                                            </a>
                                            <a class="detailtitle">
                                                <span> 看一看</span> 一分钟了解水泥
                                            </a>
                                        </div>
                                    </div>
                                    <div class="task">
                                        <div class="clearfix taskbox">
                                            <div class="triangle"></div>
                                            <div class="tasktitle">
                                                <span>任务二</span>  水泥细度检测
                                            </div>
                                        </div>
                                        <div class="detail">
                                            <a class="detailtitle">
                                                <span> 看一看</span> 介绍水泥细度步骤
                                            </a>
                                            <a class="detailtitle">
                                                <span> 看一看</span> 一分钟了解水泥
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <div class="project">
                                    <div class="projecttitle">
                                        <span>项目二</span>  水泥性能检测
                                    </div>
                                    <div class="task">
                                        <div class="clearfix taskbox">
                                            <div class="triangle"></div>
                                            <div class="tasktitle">
                                                <span>任务一</span>  水泥细度检测
                                            </div>
                                        </div>
                                        <div class="detail">
                                            <a class="detailtitle">
                                                <span> 看一看</span> 介绍水泥细度步骤
                                            </a>
                                            <a class="detailtitle">
                                                <span> 看一看</span> 一分钟了解水泥
                                            </a>
                                        </div>
                                    </div>
                                </div>

                    </div>
                </div>
            </div>
        </div>
    </div>   
       
    <!-- 底部开始 -->
    <div class="footercontenter">
        <div class="footer">
            <div class="banxin footerbanxin">
                <div class="footercenter">
                    沪公网备案  *****号&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;COPYRIGHT © 2008-2012 兰鸿科技
                </div>
            </div>
        </div>
    </div>
    <!-- 底部结束 -->
        <!-- 注册模态框开始 -->
      <!-- Modal -->
      <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                  <div class="registertitle">
                        用户注册
                  </div>
                  <form id="registerform" name="register"  class="registerform" action="">
                      <div class="form-group">
                           
                            <input  name="telephoneemail" placeholder="输入邮箱或手机号" class="telephone" type="text">
                      </div>
                      <div class="form-group">
                            
                            <input name="username" placeholder="输入用户名" class="username" type="text">
                      </div>
                      <div class="form-group">
                
                            <input id="password" name="password" placeholder="输入密码" class="password" type="password">
                      </div>
                      <!-- <div class="nameexist">该用户名已存在</div> -->
                      <div class="registerbutton">立即注册</div>
                      <div class="elseregister">
                        <span>其它登录方式</span>  
                          <a href=""><img src="../img/qq.png" alt=""></a>
                          <a href=""><img src="../img/weixin.png" alt=""></a>
                          <a href=""><img  src="../img/xinlang.png" alt=""></a>
                          <div class="nameexist">该用户名已存在</div>
                      </div>
                  </form>
              </div>
            </div>
          </div>
        <!-- 注册模态框结束 -->
        <!-- 登录模态框开始 -->
        <div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                        <div class="registertitle">
                                用户登录
                          </div>
                          <form class="registerform loginform" id="loginform" action="">
                              <div class="form-group">
                              <input  placeholder="输入用户名" name="username" class="telephone" type="text">
                              </div>
                              <div class="form-group">
                                    <input placeholder="输入密码" name="password" class="username" type="password">
                              </div>
    
                              <div class="codefather clearfix">
                                    <input  placeholder="输入验证码" name="code" class="code" type="text">
                                    <img src="../img/code.png" class="codeimg">
                                    <div class="check">换一张</div>
                                    <div class="codeerr uperr">
                                        ⓧ 用户名或密码错误
                                    </div>
                                    <div class="codeerr cerr">
                                        ⓧ 验证码错误
                                    </div>
                              </div>
    
                              <div class="loginbutton">立即登录</div>
                              <div class="else">
    
                                <div class="linkregister">注册</div>
                                <div class="forget">忘记密码</div>
                                <span>其它登录方式</span>  
            
                                  
                                 <a href=""><img src="../img/qq.png" alt=""></a>
                                 <a href=""> <img src="../img/weixin.png" alt=""></a>
                                 <a href=""><img  src="../img/xinlang.png" alt=""></a>   
                              </div>
                          </form>
                </div>
            </div>
        </div>
        <!-- 登录模态框结束 -->
        <!-- <script id="section" type="text/html">
            <% for(var i = 0 ; i < data; i++){%>
                data[0].status
            <%};%>
        </script> -->
        <!-- <div class="project">
                <div class="projecttitle">
                    <span>项目一</span>  data[i].status
                </div>
                <% if( data[i].children !== undefined ){ %>
                    123
                <% }%>
            </div> -->
        <!-- 成功 -->
        <!-- <% for(var j = 0 ; j < data[i].children.length ; j ++){%>
            <div class="task">
                <div class="clearfix taskbox">
                    <div class="triangle"></div>
                    <div class="tasktitle">
                        <span>任务二</span>  水泥细度检测
                    </div>
                </div>
                <div class="detail">
                    <% if( data[i].children[j]children !== undefined ){ %
                    <% for(var k = 0 ; k < data[i].children[j].children.length ; k ++){%>
                    <a class="detailtitle">
                        <span> 看一看</span> 介绍水泥细度步骤
                    </a>
                    <% };%>
                    <% }%>
                </div>
            </div>
        </div>
        </div>
        <% }%> -->
</body>
<script src="../node_modules/echarts/dist/echarts.common.js"></script>
<script src="../node_modules/jquery/dist/jquery.min.js" ></script>
<script src="../node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="../node_modules/art-template/lib/template-web.js" ></script>
<script src="../package/bootstrapvalidator-master/dist/js/bootstrapValidator.min.js" ></script>
<script src="../js/public.js" ></script>
<script src="../package/jquerypage.js" ></script>

<script type="text/javascript">
$(function(){
    // 模态框居中
    modalCenter('#myModal')
    modalCenter('#myModal1')

    $(".tcdPageCode").createPage({ 
    pageCount:20, 
    current:1, 
    backFn:function(p){ 
    console.log(p); 
    } 
    }); 
    //  设置学校名称字数超出显示省略号……
    function ellipsis(num) {
        $(".schnam").each(function () {
            var maxwidth = num;
            console.log($(this).text());
            if ($(this).text().length > maxwidth) {
                $(this).text($(this).text().substring(0, maxwidth));
                $(this).html($(this).html() + '…');
            }
        });
    }
    ellipsis(7);//要显示的字符数 Number


    $("#loadingModal").modal("show")
    $.ajax({
        url: HTTP_URL + "Resource/set_section",
        type: "post",
        data: {cid: 1},
        dataType: "json",
        success: function (data) {
            // var cc = {};
           
            // cc.person = [];
            // cc.person = data
            console.log('获取到数据',data);
            // var htmlx = template("section",cc);
            // $(".rightcontent").html(htmlx);


            // toastr.success("操作成功")
            let str = '<div class="project">'
            for(var i=0; i<data.length; i++ ){
                // console.log("一级",data[i].courseware);
                str += '<div class="projecttitle">\n'+
                            '<span>项目 '+(i+1)+'</span>'+data[i].courseware+
                        '</div>\n'
                if( data[i].children !== undefined ){
                    for(var j=0;j<data[i].children.length;j++){

                        str+='<div class="task">\n'+
                            '<div class="clearfix taskbox">\n'+
                                '<div class="triangle"></div>\n'+
                                '<div class="tasktitle">\n'+
                                    '<span>任务'+(j+1)+'</span>'+data[i].children[j].courseware  +'\n'+
                                '</div>\n'+
                            '</div>\n'+
                            '<div class="detail">\n'
                            if( data[i].children[j].children !== undefined ){
                                for(var k=0; k<data[i].children[j].children.length; k++){
                                    str +=  '<div  class="detailtitle">\n'+
                                                '<span>'+ data[i].children[j].children[k].function +' </span> '+ data[i].children[j].children[k].courseware +'\n'+
                                            '</div>\n'
                                }
                            }
                        str+='</div>\n'+
                        '</div>'
                    }
                }
            }
            str+='</div>';
            $(".rightcontent").html(str);



                // 让任务中的步骤都隐藏
            $(".detail").css({"display":"none"});
            var triangle = 0;
            // 如果单击按钮就让任务中的东西展示。
            $('.triangle').on("click",function(){
                triangle ++;
                if(triangle == 2){
                    triangle = 0
                }
                if(triangle){
                    $(this).css({"transform":"rotate(90deg)"}).parent().next().css({"display":"block"});
                }else{
                    $(this).css({"transform":"rotate(0deg)"}).parent().next().css({"display":"none"});
                }
            })


            $(".detailtitle").on("click",function(){
                console.log("触发");
                
                // window.location.href="lookvideofile.html"


            })
        },
        error: function (e) {
            // toastr.error("网络开小差了，请稍后再试")
            console.log(e)
        },
        complete: function (xhr, status) {
            // 隐藏loading
            $("#loadingModal").modal("hide")
        }
    })



})

</script>
</html>