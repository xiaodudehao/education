<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>学习进度统计</title>
    <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../package/bootstrapvalidator-master/dist/css/bootstrapValidator.min.css">
    <!-- 提示框样式 -->
    <link href="../lib/toastr/toastr.min.css" type="text/css" rel="stylesheet">
    <!--  对话框样式  -->
    <link href="../lib/confirm/jquery-confirm.min.css" type="text/css" rel="stylesheet">
    <!-- rwb分页的样式 -->
    <link rel="stylesheet" href="../css/public/rwbpage.css">
    <link rel="stylesheet" href="../css/learschedule.css">
</head>

<body>
<div class="maincontent">
    <!-- 头部导航栏开始 -->
    <div class="header">
        <div class="banxin">
            <img src="../img/未标题-10.png" class="logo" alt="">
            <ul>
                <li><a href="">首页</a></li>
                <li><a href="">课程</a></li>
                <li><a href="">院校</a></li>
                <li><a href="">立体教材</a></li>
            </ul>
            <div class="search">
                <img class="searchicon" src="../img/未标题-1.png" ></img>
                <input type="text" placeholder="搜索课程或学校">
            </div>
            <div class="login">
                <a href="">
                    <img class="loginicon" src="../img/未标题-2.png"></img>
                </a>
                <!-- 这里的模态框用js实现 -->
                <div class="register" data-toggle="modal" data-target="#myModal">注册</div>
                <!-- 要显示新模态框，修改data-target中的ID就可以了 -->
                <div class="log" data-toggle="modal" data-target="#myModal1">登录</div>
            </div>
        </div>
    </div>
    <!-- 头部导航栏结束 -->
    <!--  中间内容开始  -->
    <div class="tt_content">
        <!--  左边内容  -->
        <div class="tt_content_left">
            <img src="../images/kecheng1.png">
            <div class="tt_content_leftmenu">
                <a href="" class="introduction_href">课程简介</a>
                <a class="teacher_href" href="">教师团队</a>
                <a class="course_resources" href="" >课程资源</a>
                <a class="catalog_href" href="">课程目录</a>
                <a class="announcement_href" href="">系统公告</a>
                <a class="criteria_href" href="">评分表准</a>
                <a class="test_href" href="">测验/考试</a>
                <a class="course_discussion" href="">讨论区</a>
                <a class="course_class" href="">班级</a>
                <a class="course_student" href="">学生</a>
                <a class="course_sum" href="">课程统计</a>
                <a class="course_study_sum active" href="">学习统计</a>
            </div>
        </div>
        <!--  右边内容  -->
        <div class="tt_content_right">
            <div class="tt_content_right_title">
                学习进度统计
            </div>
            <!--  主要内容  -->
            <div class="tt_team">
                <a href="http://192.168.1.110/lanhong/index.php/Admin/Amount/excel_plan" class="derive">
                    导出
                </a>
                <table>
                    <thead>
                        <tr>
                            <th width="50px">序号</th>
                            <th width="100px">姓名</th>
                            <th width="350px">学校/单位</th>
                            <th width="190px">学习时长</th>
                            <th width="130px">学习进度</th>
                            <th width="50px">排名</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>张思</td>
                            <td>上海城市科技学校上海城市科技学校上海城市科技学校上海城市科技学校上海城市科技学校上海城市科技学校</td>
                            <td>65时22分12秒</td>
                            <td>学习进度</td>
                            <td>2</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>张思</td>
                            <td>上海城市科技学校</td>
                            <td>65时22分12秒</td>
                            <td>学习进度</td>
                            <td>3</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>张思</td>
                            <td>上海城市科技学校</td>
                            <td>65时22分12秒</td>
                            <td>学习进度</td>
                            <td>3</td>
                        </tr>


                    </tbody>
                </table>
                <!--  分页  -->
                <div class="page_area">
                    <ul id="page"></ul>
                </div>
                <!-- <table   class="tabletype" >
                    <thead>
                        <tr>
                            <th width="288px">班级名称</th>
                            <th width="142px">授课老师</th>
                            <th width="142px">班级人数</th>
                            <th width="142px">班级合格数</th>
                            <th width="142px">班级合格率</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td >春学一班</td>
                            <td >大老师</td>
                            <td >100</td>
                            <td>99</td>
                            <td>99%</td>
                        </tr>
                        <tr>
                            <td >平地摔一班</td>
                            <td >梨斗</td>
                            <td >100</td>
                            <td>99</td>
                            <td>99%</td>
                        </tr>
                    </tbody>
                    <tfoot>

                    </tfoot>

                </table>
                <div class="bottomhistogram clearfix">
                    <div class="lefthistogram fl">
                        <div class="histogramtitle">
                            学习成绩统计
                        </div>
                        <div id="lefthistogram">

                        </div>
                        <a class="linkgrade" href="">查看详情</a>
                    </div>
                    <div class="righthistogram fl">
                        <div class="histogramtitle">
                            学习进度统计
                        </div>
                        <div id="righthistogram">

                        </div>
                        <a class="linkgrade" href="">查看详情</a>
                    </div>

                </div> -->
             
            </div>
        </div>
    </div>
    <!--  中间内容结束  -->
    <!-- 底部开始 -->
    <div class="footercontenter">
        <div class="footer">
            <div class="banxin footerbanxin">
                <div class="footercenter">
                    沪公网备案  *****号&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;COPYRIGHT © 2008-2012 兰鸿科技
                </div>
            </div>
        </div>
    </div>
    <!-- 底部结束 -->
</div>
<!-- 注册模态框开始 -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="registertitle">
                用户注册
            </div>
            <form id="registerform" name="register"  class="registerform" action="">
                <div class="form-group">

                    <input  name="telephoneemail" placeholder="输入邮箱或手机号" class="telephone" type="text">
                </div>
                <div class="form-group">

                    <input name="username" placeholder="输入用户名" class="username" type="text">
                </div>
                <div class="form-group">

                    <input id="password" name="password" placeholder="输入密码" class="password" type="password">
                </div>
                <!-- <div class="nameexist">该用户名已存在</div> -->
                <div class="registerbutton">立即注册</div>
                <div class="elseregister">
                    <span>其它登录方式</span>
                    <a href=""><img src="../img/qq.png" alt=""></a>
                    <a href=""><img src="../img/weixin.png" alt=""></a>
                    <a href=""><img  src="../img/xinlang.png" alt=""></a>
                    <div class="nameexist">该用户名已存在</div>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- 注册模态框结束 -->
<!-- 登录模态框开始 -->
<div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="registertitle">
                用户登录
            </div>
            <form class="registerform loginform" id="loginform" action="">
                <div class="form-group">
                    <input  placeholder="输入用户名" name="username" class="telephone" type="text">
                </div>
                <div class="form-group">
                    <input placeholder="输入密码" name="password" class="username" type="password">
                </div>

                <div class="codefather clearfix">
                    <input  placeholder="输入验证码" name="code" class="code" type="text">
                    <img src="../img/code.png" class="codeimg"></img>
                    <div class="check">换一张</div>
                    <div class="codeerr uperr">
                        ⓧ 用户名或密码错误
                    </div>
                    <div class="codeerr cerr">
                        ⓧ 验证码错误
                    </div>
                </div>

                <div class="loginbutton">立即登录</div>
                <div class="else">

                    <div class="linkregister">注册</div>
                    <div class="forget">忘记密码</div>
                    <span>其它登录方式</span>


                    <a href=""><img src="../img/qq.png" alt=""></a>
                    <a href=""> <img src="../img/weixin.png" alt=""></a>
                    <a href=""><img  src="../img/xinlang.png" alt=""></a>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- 在ajax请求未返回数据前执行的动画 -->
<div class="modal fade" id="loadingModal" data-backdrop="static">
    <div style="width: 200px;height:20px; z-index: 20000; position: absolute; text-align: center; left: 50%; top: 50%;margin-left:-100px;margin-top:-10px">
        <div class="progress progress-striped active" style="margin-bottom: 0;">
            <div class="progress-bar" style="width: 100%;"></div>
        </div>
        <h5 style="color: white; font-weight: bold">努力加载中...</h5>
    </div>
</div>

<!-- 鼠标移动到学生上时所显示的框 -->
<div class="mouseovercontent">

</div>

</body>

<script src="../node_modules/echarts/dist/echarts.common.js" ></script>
<script src="../node_modules/jquery/dist/jquery.min.js" ></script>
<script src="../node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="../package/bootstrapvalidator-master/dist/js/bootstrapValidator.min.js" ></script>
<script src="../js/public.js" ></script>
<script src="../package/jquerypage.js" ></script>

<!-- 分页器 -->
<script src="../lib/bootstrap-paginator.js"></script>
<!-- 提示框插件 -->
<script src="../lib/toastr/toastr.min.js"></script>
<!-- 对话框样式 -->
<script src="../lib/confirm/jquery-confirm.min.js"></script>

<!--<script src="../js/teacher_team.js" ></script>-->
<script type="text/javascript">
    $(function(){
        // 模态框居中
        modalCenter('#myModal')
        modalCenter('#myModal1')

        // // 获取鼠标的位置
        // function getMousePos(event) {
        //     var e = event || window.event;
        //     var scrollX = document.documentElement.scrollLeft || document.body.scrollLeft;
        //     var scrollY = document.documentElement.scrollTop || document.body.scrollTop;
        //     var x = e.pageX || e.clientX + scrollX;
        //     var y = e.pageY || e.clientY + scrollY;
        //     $(".mouseovercontent").css({"left":x+20,"top":y+20})
        //     //alert('x: ' + x + '\ny: ' + y);
        //     return { 'x': x, 'y': y };
            
        // }
        // // 当鼠标移动到表格上
        // $("table").on("mouseover",function(){
        //     getMousePos();
         
        // })
        
        //提示框初始化，toast-top-center表示提示框的位置
        toastr.options = {
            positionClass: 'toast-top-center', // 提示框位置
            closeButton: true  // 是否显示关闭按钮
        }




        function confirmBySelf(content, func,tit) {
            $.confirm({
                confirmButtonClass: "btn-primary",   //设置ok按钮样式
                closeIcon: true,        //对话框右上角关闭
                confirmButton: "确认", //确认按钮标题
                cancelButton: "取消", //取消按钮标题
                title: tit,        //标题
                content: content,        //对话内容
                confirm: function () {
                    //点击确认后做什么
                    func()
                },
                cancel:function () {
                    //点击取消后做什么
                }
            })
        }
        select_announce(1)

            // 查询
        function select_announce(pageN) {
            var param = {
                cid: 1,
                page: pageN,
            }
    
            // loading显示
            $("#loadingModal").modal("show")
            var CouIntrAjax = $.ajax({
                url: HTTP_URL + "Amount/plan_details",
                type: "get",
                timeout: 5000,
                dataType: "json",
                // async:false,    //不进行异步刷新
                data: param,
                success: function (data) {
                    // console.log("学习进度",data)
                    // console.log(data[0])
                    if (0 == data.length) {
                        // 没有数据，显示提示
                        toastr.error("未查询到可用数据")
                        $("#loadingModal").modal("hide")
                    }
                    var str = ""
                    for(var i=0;i<data.list.length;i++){
                        str += '<tr>\n'+
                            '<td>'+ (i + (pageN-1)*25 + 1) +'</td>\n'+
                            '<td>'+data.list[i].zname+'</td>\n'+
                            '<td>'+data.list[i].school+'</td>\n'+
                            '<td>'+data.list[i].hour+'时'+data.list[i].minute+'分'+data.list[i].second+'秒</td>\n'+
                            '<td>'+data.list[i].zplan+'%</td>\n'+
                            '<td>'+ (i + (pageN-1)*25 + 1) +'</td>\n'+
                        '</tr>';



                    }
                    $('tbody').html(str);

                    //  //鼠标的移入移出  
                    // for(let i=0;i<data.list.length;i++){
                    //     $("tbody tr").eq(i).mouseover(function (){  
                            
                    //         $(".mouseovercontent").css({"display":"block"})
                    //         var str =   '<div>查看课程视频得分 '+ data.list[i].video +' </div>\n'+
                    //                     '<div>参与讨论情况得分 '+ data.list[i].discuss +' </div>\n'+
                    //                     '<div>提交笔记情况得分 '+ data.list[i].note +' </div>\n'+
                    //                     '<div>参与提问答疑得分 '+ data.list[i].quiz +' </div>\n'+
                    //                     '<div>参与考试/测验成绩 '+ data.list[i].exam +' </div>'
                    //         $(".mouseovercontent").html(str)
                    //     }).mouseout(function (){  
                    //         // $(".content").hide();  
                    //         // console.log("移除",j); 
                    //         $(".mouseovercontent").css({"display":"none"})
                    //     });
                    // }


                    //分页
                    $("#page").bootstrapPaginator({
                        bootstrapMajorVersion: 3,   //bootstrap版本
                        totalPages: data.num,   //总页数
                        numberOfPages: 3,    //分页器每页展示页码数
                        shouldShowPage: true,   //所有的按钮都展示
                        itemTexts: function (type, page, current) {
                            // console.log(type)
                            //设置分页控件每部分的显示文字
                            switch (type) {
                                case "first":
                                    return "第一页"
                                case "prev":
                                    return "上一页"
                                case "next":
                                    return "下一页"
                                case "last":
                                    return "最后一页"
                                case "page":
                                    return page
                                case "jump":
                                    return "跳转"
                            }
                        }, onPageClicked: function(event, originalEvent, type, page) {
                            //点击事件
                            //page表示分页控件当前的页码，用这个页码重新走网络请求，会拿到对应的数据
                            pageNum = page
                            // 查询
                            select_announce(pageNum)
                        }
                    })
                    //  分页结束
                },
                error: function (e) {
                    console.log(e)
                    console.log(e.statusText)
                    if ("timeout" == e.statusText) {
                        // 请求超时，终止请求
                        toastr.warning("请求超时")
                        CouIntrAjax.abort()
                    } else {
                        toastr.error("网络开小差了，请稍后再试！")
                    }
                    $("#loadingModal").modal("hide")
                },
                complete: function (xhr, status) {
                    // 隐藏loading
                    $("#loadingModal").modal("hide")
                }
            })
        }
    })

</script>
</html>